#################################################################################
# .mutt/muttrc - mutt configuration
#
# author: mutantmonkey <mutantmonkey@mutantmonkey.in>
################################################################################

source ${HOME}/.mutt/zenburn
source ${HOME}/.mutt/muttgpg

set charset = utf-8         # use utf-8
set nomark_old              # don't mark unread new messages as old
set nomove                  # do not move messages
set pipe_decode             # decode messages before piping

# message display
set pager_index_lines = 5   # display a mini-index in pager
set pager_stop              # do not move to next message when at end
set sort        = threads
set sort_aux    = reverse-last-date-received

# mailcap
set mailcap_path = ${HOME}/.mutt/mailcap

# aliases
set alias_file = ${HOME}/.mutt/aliases
set sort_alias = alias
set reverse_alias = yes
source $alias_file

# contacts and autocompletion
set query_command = "lbdbq '%s'"
bind editor <Tab> complete-query

# header cache
set header_cache = ${HOME}/.mutt/cache

# Always use TLS
set ssl_starttls  = yes
set ssl_force_tls = yes

# Do not use system certs, check manually
set ssl_usesystemcerts	= no
set certificate_file	= ~/.mutt/certificates

# IMAP settings
set imap_check_subscribed
set imap_delim_chars = "/"

# mailbox
set folder    = "imap://cubensis.mutantmonkey.in"
set spoolfile = =INBOX
set record    = =sent
set postponed = =drafts

source ${HOME}/.mutt/mailboxes
source ${HOME}/.mutt/personal

# keybindings
macro index S   "<save-message>=spam<enter>"    "mark message as spam"
macro index \cb "<pipe-entry>'urlscan'<enter>"  "follow links with urlscan"
macro pager \cb "<pipe-entry>'urlscan'<enter>"  "follow links with urlscan"

# sign emails
set pgp_autosign = yes

# status bar color
color status white blue

# polling frequency
set mail_check   = 60
set timeout      = 10

# outgoing mail
set sendmail      = "/usr/bin/msmtp"
set envelope_from = "yes"
set edit_headers  = "yes"

# outgoing addresses
set reverse_name     = "yes"
set reverse_realname = "no"

# hide unimportant headers
ignore *
unignore from date subject to cc

# Presentation {{{
# disable line wrap markers
set markers    = no

# order of preferred mime types
alternative_order text/plain text/enriched text/html
#alternative_order text/html text/enriched text/plain
auto_view text/html
# }}}
